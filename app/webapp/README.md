# ğŸ“± Telegram Mini App - Ø±Ø¨Ø§Øª VPN

## ğŸš€ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§

### âœ¨ Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡
- **Ø·Ø±Ø§Ø­ÛŒ Ù…Ø¯Ø±Ù†**: Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø²ÛŒØ¨Ø§ Ùˆ Ú©Ø§Ø±Ø¨Ø±Ù¾Ø³Ù†Ø¯
- **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² ØªÙ…**: Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ ØªÙ… ØªÙ„Ú¯Ø±Ø§Ù…
- **ÙˆØ§Ú©Ù†Ø´â€ŒÚ¯Ø±Ø§**: Ø³Ø§Ø²Ú¯Ø§Ø± Ø¨Ø§ ØªÙ…Ø§Ù… Ø§Ù†Ø¯Ø§Ø²Ù‡â€ŒÙ‡Ø§ÛŒ ØµÙØ­Ù‡
- **Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ø§Ø² RTL**: Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ú©Ø§Ù…Ù„ Ø§Ø² Ø²Ø¨Ø§Ù† ÙØ§Ø±Ø³ÛŒ

### ğŸ› ï¸ Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø§ØµÙ„ÛŒ
- **Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§**: Ù…Ø´Ø§Ù‡Ø¯Ù‡ØŒ ØªÙ…Ø¯ÛŒØ¯ Ùˆ Ù…Ø¯ÛŒØ±ÛŒØª Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ VPN
- **Ø®Ø±ÛŒØ¯ Ø¢Ø³Ø§Ù†**: Ø®Ø±ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯ Ø¨Ø§ Ú†Ù†Ø¯ Ú©Ù„ÛŒÚ©
- **Ú©ÛŒÙ Ù¾ÙˆÙ„**: Ù…Ø¯ÛŒØ±ÛŒØª Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ùˆ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§
- **Ù¾Ø±ÙˆÙØ§ÛŒÙ„ Ú©Ø§Ø±Ø¨Ø±ÛŒ**: Ø§Ø·Ù„Ø§Ø¹Ø§Øª Ú©Ø§Ù…Ù„ Ú©Ø§Ø±Ø¨Ø±
- **QR Code**: Ù†Ù…Ø§ÛŒØ´ QR Code Ø¨Ø±Ø§ÛŒ Ø§ØªØµØ§Ù„ Ø³Ø±ÛŒØ¹

### ğŸ”§ ÙˆÛŒÚ˜Ú¯ÛŒâ€ŒÙ‡Ø§ÛŒ ÙÙ†ÛŒ
- **Ø§Ù…Ù†ÛŒØª Ø¨Ø§Ù„Ø§**: Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ø¨Ø§ Telegram Web App
- **API RESTful**: API Ú©Ø§Ù…Ù„ Ø¨Ø±Ø§ÛŒ ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª
- **Real-time**: Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ù„Ø­Ø¸Ù‡â€ŒØ§ÛŒ Ø§Ø·Ù„Ø§Ø¹Ø§Øª
- **Cache**: Ø³ÛŒØ³ØªÙ… Ú©Ø´ Ø¨Ø±Ø§ÛŒ Ø¨Ù‡Ø¨ÙˆØ¯ Ø¹Ù…Ù„Ú©Ø±Ø¯

## ğŸ“ Ø³Ø§Ø®ØªØ§Ø± ÙØ§ÛŒÙ„â€ŒÙ‡Ø§

```
app/webapp/
â”œâ”€â”€ __init__.py          # Package initialization
â”œâ”€â”€ config.py            # Configuration settings
â”œâ”€â”€ api.py              # API endpoints
â”œâ”€â”€ static/             # Static files
â”‚   â”œâ”€â”€ index.html      # Main HTML file
â”‚   â”œâ”€â”€ app.js          # JavaScript application
â”‚   â””â”€â”€ style.css       # Custom styles (optional)
â””â”€â”€ README.md           # This file
```

## ğŸš€ Ø±Ø§Ù‡â€ŒØ§Ù†Ø¯Ø§Ø²ÛŒ

### 1. ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù…Ø­ÛŒØ·ÛŒ
```env
# Bot settings
BOT_TOKEN=your_bot_token_here
WEBHOOK_URL=https://yourdomain.com/webhook

# WebApp settings
WEBAPP_URL=https://yourdomain.com
WEBAPP_SECRET=your-secret-key

# API settings
API_BASE_URL=https://yourdomain.com/api

# Feature flags
ENABLE_WEBAPP=true
ENABLE_PAYMENTS=true
ENABLE_QR_CODES=true
```

### 2. ØªÙ†Ø¸ÛŒÙ… Bot
```python
# Ø¯Ø± ÙØ§ÛŒÙ„ main.py
from app.webapp import api as webapp_router
dp.include_router(webapp_router.router)
```

### 3. ØªÙ†Ø¸ÛŒÙ… Webhook
```python
# ØªÙ†Ø¸ÛŒÙ… webhook Ø¨Ø±Ø§ÛŒ Mini App
await bot.set_webhook(
    url="https://yourdomain.com/webhook",
    allowed_updates=["message", "callback_query"]
)
```

## ğŸ“± Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Mini App

### 1. ÙØ¹Ø§Ù„â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø± Bot
```python
# Ø¯Ø± Ø±ÙˆØªÙˆØ± Ø§ØµÙ„ÛŒ bot
@router.message(Command("webapp"))
async def open_webapp(message: Message):
    kb = InlineKeyboardMarkup(inline_keyboard=[
        [InlineKeyboardButton(
            text="ğŸ–¥ï¸ Ø¨Ø§Ø² Ú©Ø±Ø¯Ù† Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ",
            web_app=WebAppInfo(url="https://yourdomain.com")
        )]
    ])
    await message.answer("Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø®ÙˆØ¯ Ø±Ø§ Ø¨Ø§Ø² Ú©Ù†ÛŒØ¯:", reply_markup=kb)
```

### 2. Ø¯Ø³ØªØ±Ø³ÛŒ Ø¨Ù‡ Mini App
- Ú©Ø§Ø±Ø¨Ø±Ø§Ù† Ù…ÛŒâ€ŒØªÙˆØ§Ù†Ù†Ø¯ Ø§Ø² Ø·Ø±ÛŒÙ‚ Ø¯Ú©Ù…Ù‡ "Ù¾Ù†Ù„ Ú©Ø§Ø±Ø¨Ø±ÛŒ" Ø¯Ø± Ø±Ø¨Ø§Øª Ø¨Ù‡ Mini App Ø¯Ø³ØªØ±Ø³ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ù†Ù†Ø¯
- Mini App Ø¯Ø± Ø¯Ø§Ø®Ù„ ØªÙ„Ú¯Ø±Ø§Ù… Ø¨Ø§Ø² Ù…ÛŒâ€ŒØ´ÙˆØ¯
- ØªÙ…Ø§Ù… Ø¹Ù…Ù„ÛŒØ§Øª Ø¨Ø¯ÙˆÙ† Ø®Ø±ÙˆØ¬ Ø§Ø² ØªÙ„Ú¯Ø±Ø§Ù… Ø§Ù†Ø¬Ø§Ù… Ù…ÛŒâ€ŒØ´ÙˆØ¯

## ğŸ”Œ API Endpoints

### Ú©Ø§Ø±Ø¨Ø±ÛŒ
- `GET /api/user/stats` - Ø¢Ù…Ø§Ø± Ú©Ø§Ø±Ø¨Ø±
- `GET /api/user/services` - Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§ÛŒ Ú©Ø§Ø±Ø¨Ø±
- `POST /api/purchase` - Ø®Ø±ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³ Ø¬Ø¯ÛŒØ¯

### Ø³Ø±ÙˆÛŒØ³â€ŒÙ‡Ø§
- `GET /api/servers` - Ù„ÛŒØ³Øª Ø³Ø±ÙˆØ±Ù‡Ø§
- `GET /api/servers/{id}/categories` - Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒâ€ŒÙ‡Ø§ÛŒ Ø³Ø±ÙˆØ±
- `GET /api/categories/{id}/plans` - Ù¾Ù„Ù†â€ŒÙ‡Ø§ÛŒ Ø¯Ø³ØªÙ‡â€ŒØ¨Ù†Ø¯ÛŒ
- `GET /api/service/{id}/config` - Ú©Ø§Ù†ÙÛŒÚ¯ Ø³Ø±ÙˆÛŒØ³
- `POST /api/service/{id}/renew` - ØªÙ…Ø¯ÛŒØ¯ Ø³Ø±ÙˆÛŒØ³

### Ú©ÛŒÙ Ù¾ÙˆÙ„
- `POST /api/wallet/topup` - Ø´Ø§Ø±Ú˜ Ú©ÛŒÙ Ù¾ÙˆÙ„
- `GET /api/wallet/transactions` - ØªØ§Ø±ÛŒØ®Ú†Ù‡ ØªØ±Ø§Ú©Ù†Ø´â€ŒÙ‡Ø§

## ğŸ¨ Ø³ÙØ§Ø±Ø´ÛŒâ€ŒØ³Ø§Ø²ÛŒ

### ØªØºÛŒÛŒØ± ØªÙ…
```css
:root {
    --tg-theme-bg-color: #ffffff;
    --tg-theme-text-color: #000000;
    --tg-theme-button-color: #2481cc;
    --tg-theme-button-text-color: #ffffff;
}
```

### Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ØªØ¨ Ø¬Ø¯ÛŒØ¯
```javascript
// Ø¯Ø± app.js
function addNewTab() {
    // Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† ØªØ¨ Ø¬Ø¯ÛŒØ¯
    const newTab = document.createElement('li');
    newTab.className = 'nav-item';
    newTab.innerHTML = `
        <button class="nav-link" id="new-tab" data-bs-toggle="tab" data-bs-target="#new-content">
            <i class="fas fa-icon"></i> ØªØ¨ Ø¬Ø¯ÛŒØ¯
        </button>
    `;
    document.getElementById('mainTabs').appendChild(newTab);
}
```

## ğŸ”’ Ø§Ù…Ù†ÛŒØª

### Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª
- ØªÙ…Ø§Ù… Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ Ø¨Ø§ Telegram Web App authentication ØªØ£ÛŒÛŒØ¯ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- Hash verification Ø¨Ø±Ø§ÛŒ Ø§Ø·Ù…ÛŒÙ†Ø§Ù† Ø§Ø² ØµØ­Øª Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
- Rate limiting Ø¨Ø±Ø§ÛŒ Ø¬Ù„ÙˆÚ¯ÛŒØ±ÛŒ Ø§Ø² Ø³ÙˆØ¡ Ø§Ø³ØªÙØ§Ø¯Ù‡

### Ù…Ø­Ø§ÙØ¸Øª Ø§Ø² Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§
- ØªÙ…Ø§Ù… Ø¯Ø§Ø¯Ù‡â€ŒÙ‡Ø§ÛŒ Ø­Ø³Ø§Ø³ Ø±Ù…Ø²Ù†Ú¯Ø§Ø±ÛŒ Ù…ÛŒâ€ŒØ´ÙˆÙ†Ø¯
- Session management Ø§Ù…Ù†
- Input validation Ú©Ø§Ù…Ù„

## ğŸ“Š Ù…Ø§Ù†ÛŒØªÙˆØ±ÛŒÙ†Ú¯

### Ù„Ø§Ú¯â€ŒÙ‡Ø§
```python
import logging

logger = logging.getLogger(__name__)

@router.get("/api/user/stats")
async def get_user_stats(user_data: dict = Depends(verify_telegram_auth)):
    logger.info(f"User {user_data['id']} requested stats")
    # ...
```

### Ù…ØªØ±ÛŒÚ©â€ŒÙ‡Ø§
- ØªØ¹Ø¯Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±Ø§Ù† ÙØ¹Ø§Ù„
- ØªØ¹Ø¯Ø§Ø¯ Ø¯Ø±Ø®ÙˆØ§Ø³Øªâ€ŒÙ‡Ø§ÛŒ API
- Ø²Ù…Ø§Ù† Ù¾Ø§Ø³Ø® API
- Ù†Ø±Ø® Ø®Ø·Ø§

## ğŸš€ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ

### Ú©Ø´
```python
from functools import lru_cache

@lru_cache(maxsize=128)
async def get_cached_servers():
    # Ú©Ø´ Ú©Ø±Ø¯Ù† Ù„ÛŒØ³Øª Ø³Ø±ÙˆØ±Ù‡Ø§
    pass
```

### ÙØ´Ø±Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ
```python
from fastapi.middleware.gzip import GZipMiddleware

app.add_middleware(GZipMiddleware, minimum_size=1000)
```

## ğŸ› Ø¹ÛŒØ¨â€ŒÛŒØ§Ø¨ÛŒ

### Ù…Ø´Ú©Ù„Ø§Øª Ø±Ø§ÛŒØ¬
1. **Mini App Ø¨Ø§Ø² Ù†Ù…ÛŒâ€ŒØ´ÙˆØ¯**: Ø¨Ø±Ø±Ø³ÛŒ URL Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª webhook
2. **Ø§Ø­Ø±Ø§Ø² Ù‡ÙˆÛŒØª Ù†Ø§Ù…ÙˆÙÙ‚**: Ø¨Ø±Ø±Ø³ÛŒ bot token Ùˆ secret key
3. **API errors**: Ø¨Ø±Ø±Ø³ÛŒ Ù„Ø§Ú¯â€ŒÙ‡Ø§ Ùˆ ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ø¯ÛŒØªØ§Ø¨ÛŒØ³

### Ù„Ø§Ú¯â€ŒÙ‡Ø§
```bash
# Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ Mini App
tail -f logs/webapp.log

# Ù„Ø§Ú¯â€ŒÙ‡Ø§ÛŒ API
tail -f logs/api.log
```

## ğŸ“ˆ Ø¢Ù…Ø§Ø± Ø§Ø³ØªÙØ§Ø¯Ù‡

### Google Analytics
```javascript
// Ø§Ø¶Ø§ÙÙ‡ Ú©Ø±Ø¯Ù† Google Analytics
gtag('config', 'GA_MEASUREMENT_ID');
```

### Telegram Analytics
```javascript
// Ø§Ø±Ø³Ø§Ù„ Ø±ÙˆÛŒØ¯Ø§Ø¯ Ø¨Ù‡ Telegram
tg.sendData(JSON.stringify({
    event: 'user_action',
    action: 'service_purchased',
    timestamp: Date.now()
}));
```

## ğŸ‰ Ù†ØªÛŒØ¬Ù‡â€ŒÚ¯ÛŒØ±ÛŒ

Telegram Mini App Ø±Ø¨Ø§Øª VPN ÛŒÚ© Ø±Ø§Ø¨Ø· Ú©Ø§Ø±Ø¨Ø±ÛŒ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ùˆ Ø­Ø±ÙÙ‡â€ŒØ§ÛŒ Ø§Ø³Øª Ú©Ù‡:

- âœ… ØªØ¬Ø±Ø¨Ù‡ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¹Ø§Ù„ÛŒ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
- âœ… ØªÙ…Ø§Ù… Ù‚Ø§Ø¨Ù„ÛŒØªâ€ŒÙ‡Ø§ÛŒ Ø±Ø¨Ø§Øª Ø±Ø§ Ù¾ÙˆØ´Ø´ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯
- âœ… Ø§Ù…Ù†ÛŒØª Ø¨Ø§Ù„Ø§ Ø¯Ø§Ø±Ø¯
- âœ… Ø¹Ù…Ù„Ú©Ø±Ø¯ Ø¨Ù‡ÛŒÙ†Ù‡ Ø¯Ø§Ø±Ø¯
- âœ… Ù‚Ø§Ø¨Ù„ Ø³ÙØ§Ø±Ø´ÛŒâ€ŒØ³Ø§Ø²ÛŒ Ø§Ø³Øª

**Ø¢Ù…Ø§Ø¯Ù‡ Ø¨Ø±Ø§ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø¯Ø± ØªÙˆÙ„ÛŒØ¯!** ğŸš€